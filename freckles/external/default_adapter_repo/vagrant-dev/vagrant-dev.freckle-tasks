# TODO: check for VirtualBox executable, omit calling the install role if found (to speed up execution)
- name: "install virtualbox"
  install:
  vars:
    homebrew_taps: []
    homebrew_installed_packages: []
    homebrew_cask_apps:
      - virtualbox
  when: "ansible_os_family == 'Darwin' and virtualbox in freckle_vars.get('providers', {})"

- name: "[install virtualbox on Mac OS X]"
  include_role:
    name: geerlingguy.homebrew
  vars:
    homebrew_taps: []
    homebrew_installed_packages: []
    homebrew_cask_apps:
      - virtualbox
  when: "ansible_os_family == 'Darwin' and virtualbox in freckle_vars.get('providers', {})"

- name: install vagrant plugins
  install:
    pkg_mgr: vagrant_plugin
    packages:
      - "{{ item }}"
  with_items:
    - "{{ freckle_vars.vagrant_plugins | default([]) }}"
