doc:
  help: ensures the specified repositories are present locally, and used by default
args:
  pkg_mgr:
    arg_name: pkg-mgr
    help: the package manager to install git if not already installed
    metavar: PKG_MGR
    required: false
    default: auto
    is_var: false
  repos:
    arg_name: repo
    required: true
    nargs: -1
    is_var: false
    is_argument: true
  freckles_config_update_repos:
    help: "whether to update repos that are aleady enabled (default: false)"
    arg_name: update
    required: false
    default: false
    is_flag: true
    is_var: true
vars:
  freckles_config_tasks: >
    enable_repos:
    {% for r in repos %}
         - {{ r | to_nice_json() }}
    {% endfor %}

tasks:
  - install-pkg-mgrs:
      pkg_mgrs:
        - homebrew
        - git
      pkg_mgr: "{{ pkg_mgr }}"
  - makkus.freckles-config
